<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ•ç±ƒå¤§è³½</title>
    <!-- link css é †åº 1.bs 2.self -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css"
        integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        h2 {
            margin-top: 50px;
            /* å¢åŠ ä¸Šæ–¹ç™½è‰²ç©ºé–“ */
        }

        body {
            position: relative;
            background-image: url('images/ball01.jpg');
            background-size: contain;
            /* èƒŒæ™¯åœ–ç‰‡å®Œæ•´é¡¯ç¤º */
            background-position: center;
            /* èƒŒæ™¯åœ–ç‰‡ç½®ä¸­ */
            background-repeat: no-repeat;
            /* ä¸é‡è¤‡åœ–ç‰‡ */
            height: 80vh;
            margin: 10px 310px 130px 310px;
        }

        /* å¢åŠ æ·¡åŒ–æ•ˆæœ */
        body::after {
            content: "";
            position: absolute;
            top: 0;
            left: 10;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            /* åŠé€æ˜ç™½è‰²è¦†è“‹èƒŒæ™¯ */
            z-index: -1;
            /* ç¢ºä¿ä¸æœƒé®æ“‹å…§å®¹ */
            border: 5px solid black;
        }

        .box1 {
            border: 10px solid rgb(255, 50, 50);
            margin: 25px auto 0 auto;
            /* èª¿æ•´é»‘è‰²æ¡†ç·šä½ç½®å¾€ä¸Š */
            width: 90%;
            height: 45vh;
        }

        .box2 {
            margin: auto;
            width: 80%;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        span {
            font-size: 50px;
        }

        img {
            width: 100%;
        }

        .container-box {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        /* çƒçš„æ¨£å¼ */
        .ball {
            position: absolute;
            width: 60px;
            height: 60px;
            background-image: url('./images/basketball01.png');
            background-size: cover;
            border-radius: 50%;
            top: 100px;
            left: 150px;
            display: none;
        }

        /* å®šç¾©çƒç§»å‹•çš„å‹•ç•« */
        @keyframes throwBall {
            0% {
                top: 30%;
                /* åˆå§‹ä½ç½®ï¼šç•«é¢åº•éƒ¨ */
                left: 50%;
                /* æ°´å¹³å±…ä¸­ */
                transform: translateX(-50%);
                /* æ°´å¹³ç½®ä¸­ */
            }

            100% {
                top: 25%;
                /* æœ€çµ‚ä½ç½®ï¼šç•«é¢ä¸­é–“ */
                left: 50%;
                /* æ°´å¹³ç½®ä¸­ */
                transform: translateX(-50%);
                /* å®Œå…¨æ°´å¹³ç½®ä¸­ */
            }
        }
    </style>
</head>

<body>

    <div class="container text-center mt-5">
        <h2><br>æŠ•ç±ƒå¤§è³½</h2>
    </div>

    <div class="container text-center mt-5">
        <div class="row">
            <div class="col-2">
                <div class="img-box">
                    <img src="./images/ball.gif" class="img-fluid mt-3 rounded" alt="" srcset="">
                </div>
            </div>
            <div class="col-8">
                <div class="box1">
                    <div class="container-box">
                        <div>
                            å€’æ•¸è¨ˆæ™‚<br>
                            <span id="timer">60</span>
                        </div>
                        <div>
                            <br>
                            <span id="message"></span> <!-- é¡¯ç¤ºæç¤ºè¨Šæ¯ -->
                        </div>
                        <div id="clearHighScore">
                            æœ€é«˜åˆ†æ•¸<br>
                            <span id="highScore">999</span>
                        </div>
                    </div>
                    <br>
                    <p>
                        åˆ†æ•¸
                    </p>
                    <p>
                        <span id="nowScore">168</span>
                    </p>
                </div>
            </div>
            <div class="col-2">
                <div class="img-box ">

                </div>
            </div>
        </div>
    </div>

    <div class="container text-center mt-5">
        <div class="box2">
            <button type="button" id="pauseBtn"
                class="btn btn-danger btn-lg">æš«&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ</button>
            <button type="button" id="goBtn" class="btn btn-danger btn-lg"
                style="display: none;">ç¹¼&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;çºŒ</button>
            <button type="button" id="startBtn"
                class="btn btn-dark btn-lg">é–‹&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å§‹</button>
            <button type="button" id="shootBtn" class="btn btn-dark btn-lg"
                style="display: none;">æŠ•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;çƒ</button>
            <button type="button" id="resetBtn"
                class="btn btn-danger btn-lg">é‡&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç½®</button>

        </div>
    </div>

    <!-- çƒå…ƒç´  -->
    <div id="ball" class="ball"></div>

    <!-- js include é †åº 1.bs 2.jq 3.self -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.bundle.min.js"
        integrity="sha512-7Pi/otdlbbCR+LnW+F7PwFcSDJOuUJB3OxtEHbg4vSMvzvJjde4Po1v4BR9Gdc9aXNUNFVUY+SK51wWT8WF0Gg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>
        $(document).ready(function () {
            // è®Šæ•¸å®£å‘Š
            const nowScore = $('#nowScore');
            const highScore = $('#highScore');
            const timer = $('#timer');
            const startBtn = $('#startBtn');
            const shootBtn = $('#shootBtn');
            const resetBtn = $('#resetBtn');
            const pauseBtn = $('#pauseBtn');
            const goBtn = $('#goBtn');
            const message = $('#message');
            const ball = $('#ball');  // çƒå…ƒç´ é¸å–å™¨

            let scoreVar = 0;
            let myInterval;
            let scoreHighVar = localStorage.getItem('highScore') || 0;
            let timeVar = 60; // è¨­å®šåˆå§‹æ™‚é–“ç‚º 60 ç§’
            let gameFlag = false;  // ç•¶éŠæˆ²é€²è¡Œæ™‚ç‚º true
            let tmpTime = timeVar;

            nowScore.text(scoreVar);
            highScore.text(scoreHighVar);
            timer.text(tmpTime);
            shootBtn.hide(); // é–‹å§‹æŒ‰éˆ•ä¸é¡¯ç¤º
            goBtn.hide();  // ç¹¼çºŒæŒ‰éˆ•éš±è—
            message.text('');

            // é–‹å§‹éŠæˆ²
            startBtn.click(function () {
                if (gameFlag) return; // éŠæˆ²å·²ç¶“é–‹å§‹å°±ä¸é‡è¤‡è§¸ç™¼

                gameFlag = true;
                startBtn.hide();
                shootBtn.show();
                pauseBtn.show();
                myInterval = setInterval(myTimer, 1000); // æ¯ç§’å€’æ•¸ä¸€æ¬¡
            });

            // æ™‚é–“å€’æ•¸å‡½æ•¸
            function myTimer() {
                tmpTime--;
                if (tmpTime < 0) {
                    clearInterval(myInterval);
                    gameFlag = false;
                    startBtn.show();
                    shootBtn.hide();
                    message.text('');

                    // é¡¯ç¤ºå½ˆå‡ºè¦–çª—
                    alert(`ğŸ‰æ­å–œä½ å¾—åˆ° ${scoreVar} åˆ†ï¼Œå†ä¾†ä¸€å ´æ–°éŠæˆ²ï¼Œè«‹é»é¸é‡ç½®ğŸ€`);

                    // è‹¥å¾—åˆ†é«˜æ–¼æœ€é«˜åˆ†æ•¸å‰‡æ›´æ–°æœ€é«˜åˆ†
                    if (scoreVar > scoreHighVar) {
                        localStorage.setItem('highScore', scoreVar);
                        highScore.text(scoreVar);
                    }

                    // æ™‚é–“çµæŸå¾Œï¼Œç¦ç”¨æŠ•çƒæŒ‰éˆ•
                    shootBtn.prop('disabled', true);
                } else {
                    timer.text(tmpTime);
                }
            }

            // æš«åœéŠæˆ²
            pauseBtn.click(function () {
                if (!gameFlag) return; // è‹¥éŠæˆ²æœªé–‹å§‹ï¼Œå‰‡ä¸è™•ç†

                gameFlag = false;
                clearInterval(myInterval);
                pauseBtn.hide();
                goBtn.show();
                message.text('å·²æš«åœï¼Œè«‹é»ç¹¼çºŒâ–¶');
            });

            // ç¹¼çºŒéŠæˆ²
            goBtn.click(function () {
                gameFlag = true;
                goBtn.hide();
                pauseBtn.show();
                myInterval = setInterval(myTimer, 1000);  // é‡æ–°å•Ÿå‹•å€’æ•¸è¨ˆæ™‚
                message.text('');
            });

            // æŠ•çƒ
            shootBtn.click(function () {
                if (!gameFlag) {
                    message.text('é»ç¹¼çºŒå¾Œï¼Œå§‹è¨ˆåˆ†');
                    return;
                }

                ball.show();
                ball.css('animation', 'throwBall 1s forwards');  // åŸ·è¡Œå‹•ç•«

                if (tmpTime <= 10) {
                    scoreVar += 3;  // å‰©é¤˜æ™‚é–“å°‘æ–¼ 10 ç§’ç²å¾— 3 åˆ†
                } else {
                    scoreVar += 2;  // å‰©é¤˜æ™‚é–“å¤§æ–¼ 10 ç§’ç²å¾— 2 åˆ†
                }

                nowScore.text(scoreVar);

                setTimeout(function () {
                    ball.hide();
                    ball.css('top', '100px');
                    ball.css('left', '150px');
                }, 500); // å‹•ç•«çµæŸå¾Œéš±è—çƒ
            });

            // é‡ç½®éŠæˆ²
            resetBtn.click(function () {
                clearInterval(myInterval);
                gameFlag = false;
                tmpTime = timeVar;
                scoreVar = 0;
                nowScore.text(scoreVar);
                timer.text(tmpTime);
                startBtn.show();
                shootBtn.hide();
                pauseBtn.hide();
                goBtn.hide();
                message.text('');

                // è§£é™¤æŠ•çƒæŒ‰éˆ•ç¦ç”¨ç‹€æ…‹
                shootBtn.prop('disabled', false);
            });

            // æœ€é«˜åˆ†æ•¸æ¸…é™¤
            $('#clearHighScore').click(function () {
                localStorage.setItem('highScore', 0);  // æ¸…é™¤ localStorage ä¸­çš„æœ€é«˜åˆ†æ•¸
                scoreHighVar = 0;  // æ›´æ–°åˆ†æ•¸è®Šæ•¸
                highScore.text(scoreHighVar);  // æ›´æ–°é é¢ä¸Šçš„é¡¯ç¤º
                console.log('æœ€é«˜åˆ†æ•¸å·²æ¸…é™¤ï¼Œç•¶å‰æœ€é«˜åˆ†æ•¸ç‚ºï¼š', scoreHighVar);  // é¡¯ç¤ºåœ¨æ§åˆ¶å°
            });
        });
    </script>
</body>

</html>